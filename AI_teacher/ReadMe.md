## AI 外教

### 项目需求文档：英语模拟生活场景学习软件

---

#### **一、项目背景**
开发一款模拟真实海外生活场景的英语学习软件，通过沉浸式交互（对话、任务、语音识别）帮助用户提升日常英语能力。用户可扮演不同角色，完成如点餐、租房、求职等任务。

---

#### **二、用户需求**
1. **核心功能**
   - **场景库**  
     - 机场入境、超市购物、医院就诊、银行开户等10+场景（按难度分级）
     - 每个场景包含：背景描述、角色设定（用户+AI NPC）、目标任务（如“成功租到公寓”）
   - **对话交互**  
     - 分支对话树：用户选择回答或自由输入文本/语音
     - AI NPC动态响应（如回答错误时店员皱眉并重复问题）
   - **语音识别**  
     - 实时评估发音准确度（如通过API返回评分）
     - 支持慢速/常速听力模式切换
   - **学习辅助**  
     - 即时翻译（点击生词显示中英对照）
     - 语法提示（如“应使用过去式：Did you have a reservation?”）
   - **进度系统**  
     - 成就徽章（如“咖啡大师：完成5次点咖啡对话”）
     - 错误统计报告（常用语法错误、高频生词列表）

2. **扩展需求**
   - **AR模式**：用手机摄像头扫描现实物品触发英语问答（如扫描苹果弹出“How much does this apple cost?”）
   - **用户创作**：允许上传自定义场景（如面试科技公司）并共享到社区
   - **多人模式**：与其他用户角色扮演对话（如一人扮演顾客，一人扮演店员）

---

#### **三、技术方案**
1. **架构设计**
   ```markdown
   - 前端：React Native（跨平台）+ Unity3D（3D场景需求）
   - 后端：Python FastAPI（处理对话逻辑、用户数据）
   - 数据库：MongoDB（存储用户进度、场景数据）
   - 关键技术栈：
     - 语音识别：Google Cloud Speech-to-Text 或 Mozilla DeepSpeech（开源）
     - 对话生成：Rasa NLU 或 GPT-3.5 API（需处理敏感词过滤）
     - 3D建模：Blender制作场景资源（如便利店、地铁站）
   ```

2. **关键模块**
   - **场景引擎**  
     ```python
     class SceneEngine:
         def load_scene(scene_id):
             # 载入场景的对话树、角色数据、3D资源
             pass
         def evaluate_response(user_input):
             # 对比用户输入与预设答案的语义相似度（使用余弦相似度算法）
             return score
     ```
   - **语音处理流水线**  
     ```mermaid
     graph LR
     A[用户录音] --> B(降噪处理WebRTC) --> C{识别模式}
     C -->|逐句| D[Google STT]
     C -->|实时流| E[DeepSpeech]
     D --> F[返回文本+发音评分]
     ```

---

#### **四、文档清单**
1. **需求文档**  
   - 用户画像（留学生、商务人士、旅行者）
   - 功能优先级矩阵（MoSCoW法则）

2. **API文档示例**
   ```json
   // 语音评估API响应
   {
     "text": "I'd like a cappuccino",
     "pronunciation_score": 82,
     "feedback": "注意 'cappuccino' 重音在第二个音节"
   }
   ```

3. **测试用例**
   | 测试场景      | 输入                | 预期输出                 |
   | ------------- | ------------------- | ------------------------ |
   | 点餐场景-正确 | "No sugar, please"  | AI回复确认并进入支付环节 |
   | 点餐场景-错误 | "I want eat burger" | 语法提示 + NPC反问确认   |

---

#### **五、开发建议**
1. **敏捷开发**：优先开发核心场景（餐厅+机场），使用Mock数据测试对话流
2. **开源替代**：  
   - 语音识别：使用[Whisper.cpp](https://github.com/ggerganov/whisper.cpp)本地部署降低成本
   - 对话生成：[ChatGPT-Free](https://github.com/ConnectAI-E/GitChat)替代商业API
3. **合规性**：用户语音数据加密存储（AES-256），遵循GDPR标准

---

#### **六、潜在难点与解决方案**
- **自然语言理解**：方言或语法错误导致识别失败  
  → 结合规则引擎（正则匹配“I wanna...” → “I want to...”） + 机器学习
- **3D性能优化**：低端手机卡顿  
  → 提供2D简版模式，使用Sprite2D替代3D模型

---

通过以上设计，用户可在6个月内完成MVP版本（预算约$15k，含第三方API成本）。建议先验证核心交互模型，再逐步扩展场景库。如“咖啡大师：完成5次点咖啡对话”）

- 错误统计报告（常用语法错误、高频生词列表）

1. **扩展需求**
   - **AR模式**：用手机摄像头扫描现实物品触发英语问答（如扫描苹果弹出“How much does this apple cost?”）
   - **用户创作**：允许上传自定义场景（如面试科技公司）并共享到社区
   - **多人模式**：与其他用户角色扮演对话（如一人扮演顾客，一人扮演店员）

